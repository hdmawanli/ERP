{% extends 'base.html' %}
{% block title %}种子批次列表{% endblock %}
{% block content %}
<div class="container">
  <div class="page-header">
    <div class="page-title">种子批次列表</div>
  </div>
  <a href="{{ url_for('seed_batch.add_batch') }}" class="btn btn-primary mb-3">添加新批次</a>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>批次号</th>
        <th>产品名称</th>
        <th>生产日期</th>
        <th>保质期(天)</th>
        <th>到期日期</th>
        <th>状态</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for batch in batches %}
      <tr>
        <td>{{ batch.batch_id }}</td>
        <td>{{ batch.batch_number }}</td>
        <td>{{ batch.product.product_name }}</td>
        <td>{{ batch.production_date.strftime('%Y-%m-%d') }}</td>
        <td>{{ batch.shelf_life }}</td>
        <td>{{ batch.expiration_date.strftime('%Y-%m-%d') }}</td>
        <td>
          {% if batch.status == 1 %}
          <span class="badge badge-success">正常</span>
          {% elif batch.status == 2 %}
          <span class="badge badge-warning">即将过期</span>
          {% elif batch.status == 3 %}
          <span class="badge badge-danger">已过期</span>
          {% endif %}
        </td>
        <td>
          <a href="{{ url_for('seed_batch.edit_batch', batch_id=batch.batch_id) }}" class="btn btn-sm btn-secondary">编辑</a>
          <a href="{{ url_for('seed_batch.batch_detail', batch_id=batch.batch_id) }}" class="btn btn-sm btn-info">详情</a>
          <form method="POST" action="{{ url_for('seed_batch.delete_batch', batch_id=batch.batch_id) }}" style="display: inline;">
            <input type="submit" value="删除" class="btn btn-sm btn-danger" onclick="return confirm('确定要删除这个批次吗？')">
          </form>
        </td>
      </tr>
      {% else %}
      <tr><td colspan="8" class="text-center">没有记录</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}